(function(a){a.fn.SubRows=function(b){var c={subrowClass:"lf_subRow",iconClass:"lf_toggle_icon",activeClass:"lf_active",defaultClass:"lf_default",emptyClass:"lf_empty",speed:"fast",subRowWrapperClass:"lf_slide"},d="lf_parentRow",e={rowsChecked:!1,CheckRows:function(b,c){b.children("tr").map(function(){a(this).hasClass(d)==!1&&a(this).prev("tr").hasClass(d)==!1&&a(this).find("td:first").find(e.jQueryClass(c.emptyClass)).length==0&&a(this).find("td:first").prepend('<span class="'+c.iconClass+" "+c.emptyClass+'"></span>')}),e.rowsChecked=!0},jQueryClass:function(a){return"."+a}};this.addClass(d);var f=this.find(e.jQueryClass(c.emptyClass));return f.remove(),this.each(function(){var d=c;b&&(d=a.extend({},c,b));var f=a(this);e.rowsChecked||e.CheckRows(f.closest("tbody"),d),f.find("td:first").prepend('<span class="'+d.iconClass+" "+d.defaultClass+'"></span>'),f.next("tr").addClass(d.subrowClass),f.next("tr").find("td:first").wrapInner('<div class="'+d.subRowWrapperClass+'" />'),a(this).find(e.jQueryClass(d.iconClass)).bind("click",function(){var b=a(this).hasClass(d.defaultClass);b?(a(this).removeClass(d.defaultClass),a(this).addClass(d.activeClass),f.next(e.jQueryClass(d.subrowClass)).css("display","table-row").find(e.jQueryClass(d.subRowWrapperClass)).slideToggle(d.speed,function(){})):(a(this).removeClass(d.activeClass),a(this).addClass(d.defaultClass),f.next(e.jQueryClass(d.subrowClass)).find(e.jQueryClass(d.subRowWrapperClass)).slideToggle(d.speed,function(){f.next(e.jQueryClass(d.subrowClass)).css("display","none")}))})})}})(jQuery)